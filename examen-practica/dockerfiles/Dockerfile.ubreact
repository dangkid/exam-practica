# Dockerfile.ubreact - Aplicaci贸n React sobre ubnginx
FROM ubnginx:latest

LABEL description="Aplicaci贸n React con Node.js"

# Instalar Node.js y npm
RUN apt-get update && apt-get install -y \
    nodejs \
    npm \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# Crear directorio de la aplicaci贸n
WORKDIR /app

# Copiar aplicaci贸n
COPY pokeapi-app/package*.json ./
RUN npm install

COPY pokeapi-app/ .

EXPOSE 3000 80 5724

# Script de inicio
RUN echo '#!/bin/bash\nnpm start &\nservice nginx start\nservice ssh start\ntail -f /dev/null' > /start-react.sh && \
    chmod +x /start-react.sh

CMD ["/start-react.sh"]
